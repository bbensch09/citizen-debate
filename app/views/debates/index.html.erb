<p id="notice"><%= notice %></p>

<div class="profile-container">

<%= link_to 'New Debate', new_debate_path %>

<h1 class="center debate-list-header">Recently Completed Debates</h1>

<table class="col-lg-12 col-sm-12 waitlist-table">
  <thead>
    <tr>
      <th>Topic</th>
      <th>Affirmative</th>
      <th>Negative</th>
      <th>Minds Changed</th>
      <th>Posted</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @completed_debates.each do |debate| %>
      <tr>
        <td><%= debate.topic_id %></td>
        <td><%= debate.affirmative_debater.user.profile.display_name %></td>
        <td><%= debate.negative_debater.user.profile.display_name %></td>
        <td> <b> 15 </b> </td>
        <td><%= debate.time_since_updated %></td>
<!-- INSERT LOGIC FOR ADMIN ONLY       -->
        <td><%= link_to 'Show', debate %></td>
        <td><%= link_to 'Edit', edit_debate_path(debate) %></td>
        <td><%= link_to 'Destroy', debate, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<hr>

<h1 class="center debate-list-header">Active Debates</h1>

<table class="col-lg-12 col-sm-12 waitlist-table">
  <thead>
    <tr>
      <th>Topic</th>
      <th>Affirmative</th>
      <th>Negative</th>
      <th>Current Round</th>
      <th>Last Updated</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @active_debates.each do |debate| %>
      <tr>
        <td><%= debate.topic_id %></td>
        <td><%= debate.affirmative_debater.user.profile.display_name %></td>
        <td><%= debate.negative_debater.user.profile.display_name %></td>
        <td> <b> debate.rounds.last.round_number </b> </td>
        <td><%= debate.time_since_updated %></td>
<!-- INSERT LOGIC FOR ADMIN ONLY       -->
        <td><%= link_to 'Show', debate %></td>
        <td><%= link_to 'Edit', edit_debate_path(debate) %></td>
        <td><%= link_to 'Destroy', debate, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<hr>

<h1 class="center debate-list-header">Upcoming Debates</h1>

<table class="col-lg-12 col-sm-12 waitlist-table">
  <thead>
    <tr>
      <th>Topic</th>
      <th>Creator</th>
      <th>Challenger</th>
      <th>Status</th>
      <th>Last Updated</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @upcoming_debates.each do |debate| %>
      <tr>
        <td><%= debate.topic_id %></td>
        <td><%= debate.creator_id.user.profile.display_name %></td>
        <td><%= debate.challenger_id.user.profile.display_name %></td>
        <td> <b> debate.status </b> </td>
        <td><%= debate.time_since_updated %></td>
<!-- INSERT LOGIC FOR ADMIN ONLY       -->
        <td><%= link_to 'Show', debate %></td>
        <td><%= link_to 'Edit', edit_debate_path(debate) %></td>
        <td><%= link_to 'Destroy', debate, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>



</div>
